server {
    listen           %(web_port)s;
    listen           443 ssl;
    ssl_certificate  /var/app/data/dolphinop-webfront/server.crt;
    ssl_certificate_key /var/app/data/dolphinop-webfront/server.key;
    server_name      home.dolphin-browser.com;
	gzip             on;
	gzip_comp_level  6;
	gzip_min_length  1000;
        gzip_proxied any;
        gzip_buffers 16 8k;
	gzip_types       application/javascript text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
	gzip_disable     "msie6";

    root             /var/app/enabled/dolphinop-webfront/static/;

    log_format home_access '$remote_addr - $remote_user [$time_local]  '
                '"$request" $status $body_bytes_sent '
                '$request_time $upstream_response_time '
                '$upstream_cache_status '
                '"$http_referer" "$http_user_agent"';

    access_log       %(log_dir_base)s/dolphinop-webfront/home-access.log home_access;

	error_log       %(log_dir_base)s/dolphinop-webfront/home-error.log;
	index		 index.html index.htm index.php;

    proxy_connect_timeout 30;
    proxy_read_timeout 120;
    proxy_send_timeout 120;

    proxy_redirect off;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

	set $foreign_addr $remote_addr;
	if ($http_x_real_ip) {
		set $foreign_addr $http_x_real_ip;
	}
	
	proxy_set_header X-Real-IP $foreign_addr;
	
	location ~(favicon.ico) {
        alias /var/app/enabled/dolphinop-webfront/static/favicon.ico;
	    expires 30d;
	    break;
	}

    location /AddonTheme/Theme.aspx {
        rewrite /AddonTheme/Theme.aspx /pages/theme/index.html;
    }

    location /AddonTheme/ {
        alias /var/app/enabled/static-web/static/pages/theme/;
    }
    
    location /pages {
        alias /var/app/enabled/static-web/static/pages/;
    }

    location / {
        proxy_pass http://65.52.32.12;
    }
}

