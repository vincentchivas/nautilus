var Zepto=function(){function e(a){return a.filter(function(a){return a!==j&&null!==a})}function d(a,g){this.dom=a||[];this.selector=g||""}function b(a,g){return a==document?new d:g!==j?b(g).find(a):new d(e(a instanceof d?a.dom:a instanceof Array?a:a instanceof Element?[a]:c.call(i.querySelectorAll(a))),a)}var c=[].slice,i=document,h={append:"beforeEnd",prepend:"afterBegin",before:"beforeBegin",after:"afterEnd"},f,k,j;String.prototype.trim===j&&(String.prototype.trim=function(){return this.replace(/^\s+/,
"").replace(/\s+$/,"")});d.prototype=b.fn;b.extend=function(a,g){for(f in g)a[f]=g[f]};camelize=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})};b.fn={ready:function(a){document.addEventListener("DOMContentLoaded",a,!1);return this},compact:function(){this.dom=e(this.dom);return this},get:function(a){return a===j?this.dom:this.dom[a]},remove:function(){return this.each(function(a){a.parentNode.removeChild(a)})},each:function(a){this.dom.forEach(a);return this},filter:function(a){return b(this.dom.filter(function(b){return 0<=
c.call(b.parentNode.querySelectorAll(a)).indexOf(b)}))},is:function(a){return 0<this.dom.length&&0<b(this.dom[0]).filter(a).dom.length},first:function(){this.dom=e([this.dom[0]]);return this},find:function(a){return b(this.dom.map(function(b){return c.call(b.querySelectorAll(a))}).reduce(function(a,b){return a.concat(b)},[]))},closest:function(a){for(var g=this.dom[0].parentNode,a=c.call(i.querySelectorAll(a));g&&0>a.indexOf(g);)g=g.parentNode;return b(g&&g!==i?g:[])},pluck:function(a){return this.dom.map(function(b){return b[a]})},
show:function(){return this.css("display","block")},hide:function(){return this.css("display","none")},prev:function(){return b(this.pluck("previousElementSibling"))},next:function(){return b(this.pluck("nextElementSibling"))},html:function(a){return a===j?0<this.dom.length?this.dom[0].innerHTML:null:this.each(function(b){b.innerHTML=a})},attr:function(a,b){return"string"==typeof a&&b===j?0<this.dom.length?this.dom[0].getAttribute(a)||void 0:null:this.each(function(c){if("object"==typeof a)for(f in a)c.setAttribute(f,
a[f]);else c.setAttribute(a,b)})},offset:function(){var a=this.dom[0].getBoundingClientRect();return{left:a.left+i.body.scrollLeft,top:a.top+i.body.scrollTop,width:a.width,height:a.height}},css:function(a,b){if(b===j&&"string"==typeof a)return this.dom[0].style[camelize(a)];k="";for(f in a)k+=f+":"+a[f]+";";"string"==typeof a&&(k=a+":"+b);return this.each(function(a){a.style.cssText+=";"+k})},index:function(a){return this.dom.indexOf(b(a).get(0))},bind:function(a,b){return this.each(function(c){a.split(/\s/).forEach(function(a){c.addEventListener(a,
b,!1)})})},delegate:function(a,b,d){return this.each(function(e){e.addEventListener(b,function(b){for(var g=b.target,f=c.call(e.querySelectorAll(a));g&&0>f.indexOf(g);)g=g.parentNode;g&&g!==e&&g!==i&&d(g,b)},!1)})},live:function(a,c){b(i.body).delegate(this.selector,a,c);return this},hasClass:function(a){return RegExp("(^|\\s)"+a+"(\\s|$)").test(this.dom[0].className)},addClass:function(a){return this.each(function(c){!b(c).hasClass(a)&&(c.className+=(c.className?" ":"")+a)})},removeClass:function(a){return this.each(function(b){b.className=
b.className.replace(RegExp("(^|\\s)"+a+"(\\s|$)")," ").trim()})},trigger:function(a){return this.each(function(b){var c;b.dispatchEvent(c=i.createEvent("Events"),c.initEvent(a,!0,!1))})}};["width","height"].forEach(function(a){b.fn[a]=function(){return this.offset()[a]}});for(f in h)b.fn[f]=function(a){return function(b){return this.each(function(c){c["insertAdjacent"+(b instanceof Element?"Element":"HTML")](a,b)})}}(h[f]);d.prototype=b.fn;return b}();"$"in window||(window.$=Zepto);
(function(e){function d(b){var c={},d=b.match(/(Android)\s+([0-9\.]+)/),e=b.match(/(iPhone\sOS)\s([0-9_]+)/),f=b.match(/(iPad).*OS\s([0-9_]+)/),b=b.match(/(webOS)\/([0-9\.]+)/);d&&(c.android=!0,c.version=d[2]);e&&(c.ios=!0,c.version=e[2].replace(/_/g,"."),c.iphone=!0);f&&(c.ios=!0,c.version=f[2].replace(/_/g,"."),c.ipad=!0);b&&(c.webos=!0,c.version=b[2]);return c}e.os=d(navigator.userAgent);e.__detect=d})(Zepto);
(function(e){e.fn.anim=function(d,b,c){var e=[],h,f;for(f in d)"opacity"===f?h=d[f]:e.push(f+"("+d[f]+")");return this.css({"-webkit-transition":"all "+(b||0.5)+"s "+(c||""),"-webkit-transform":e.join(" "),opacity:h})}})(Zepto);
(function(e){var d={},b;e(document).ready(function(){e(document.body).bind("touchstart",function(c){var e=Date.now(),h=e-(d.last||e);d.target="tagName"in c.touches[0].target?c.touches[0].target:c.touches[0].target.parentNode;b&&clearTimeout(b);d.x1=c.touches[0].pageX;0<h&&250>=h&&(d.isDoubleTap=!0);d.last=e}).bind("touchmove",function(b){d.x2=b.touches[0].pageX}).bind("touchend",function(){d.isDoubleTap?(e(d.target).trigger("doubleTap"),d={}):0<d.x2?(30<Math.abs(d.x1-d.x2)&&e(d.target).trigger("swipe"),
d.x1=d.x2=d.last=0):"last"in d&&(b=setTimeout(function(){b=null;e(d.target).trigger("tap");d={}},250))}).bind("touchcancel",function(){d={}})});["swipe","doubleTap","tap"].forEach(function(b){e.fn[b]=function(d){return this.bind(b,d)}})})(Zepto);
(function(e){function d(b,c,d){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&(200==e.status||0==e.status?d(e.responseText):d(""))};e.open(b,c,!0);e.send(null)}e.get=function(b,c){d("GET",b,c)};e.post=function(b,c){d("POST",b,c)};e.getJSON=function(b,c){e.get(b,function(b){c(JSON.parse(b))})};e.fn.load=function(b,c){var d=this,h=b.split(/\s/),f;if(!this.length)return this;1<h.length&&(b=h[0],f=h[1]);e.get(b,function(b){d.html(f?e(document.createElement("div")).html(b).find(f).html():
b);c&&c()});return this}})(Zepto);(function(e){var d=[],b;e.fn.remove=function(){return this.each(function(c){"IMG"==c.tagName&&(d.push(c),c.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",b&&clearTimeout(b),b=setTimeout(function(){d=[]},6E4));c.parentNode.removeChild(c)})}})(Zepto);

(function(b){b.fn.lazyload=function(a){var c=a||b.preload,d=this;window.addEventListener("scroll",function(){d.each(function(a){!b.abovethetop(a)&&!b.leftofbegin(a)&&!b.belowthefold(a)&&!b.rightoffold(a)&&b(a).trigger("appear")});for(var a=[],e=0,c=d.dom.length;e<c;e++)d.dom[e].loaded||a.push(d.dom[e]);d=b(a)});this.each(function(a){a.loaded=!1;b(a).bind("appear",function(){a.loaded||c(a)})});a=document.createEvent("Events");a.initEvent("scroll",!0,!1);window.dispatchEvent(a);return this};b.belowthefold=
function(a){return window.innerHeight+window.scrollY<=b(a).offset().top};b.rightoffold=function(a){return window.innerWidth+window.scrollX<=b(a).offset().left};b.abovethetop=function(a){return window.scrollY>=b(a).offset().top+b(a).height()};b.leftofbegin=function(a){return window.scrollX>=b(a).offset().left+b(a).width()};b.preload=function(a){var c=document.createElement("img");b(c).bind("load",function(){b(a).hide().attr("src",b(a).attr("data-original")).show();a.loaded=!0}).attr("src",b(a).attr("data-original"))};
b.load=function(a){b(a).attr("src",b(a).attr("data-original"));a.loaded=!0}})(Zepto);

(function(){var b={};this.tmpl=function e(a,c){var d=!/\W/.test(a)?b[a]=b[a]||e(document.getElementById(a).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('")+"');}return p.join('');");if(!c)return d;try{return d(c)}catch(f){return""}}})();

var loadApps=null,vote=null,track=null,addslashes=null,shortNum=null,showpop=null;
(function(b){function z(a,c){if(!c){var g=b(".loading_more a",j[a]),e=b(".loading_more label",j[a]);g.hide();e.show()}}function o(a,c){var g=b(".loading_more a",j[c]),e=b(".loading_more label",j[c]),d=JSON.parse(a);d?(d=tmpl(c+"_tmpl",d))?(auto_loading||(e.hide(),g.show()),k[c].append(d),h[c]++,b("img.lazy").lazyload(),b("img.lazy").removeClass("lazy"),"middle"==c&&2==h[c]&&A()):(e.html("No More Apps"),l[c]=!1):(e.html("No More Apps"),l[c]=!1)}function B(a){b.get(C+a,function(a){if(""!=a||"[]"!=a)a=
JSON.parse(a),b("#app_content").append(tmpl("related_tmpl",a)),b("img.lazy").lazyload(b.load),b("img.lazy").removeClass("lazy")})}function D(){var a=b("#details");b(".more_btn").bind("click",function(){var c=b(this);c.hasClass("more")?(a.css("height","auto"),c.removeClass("more"),c.html("less")):(a.css("height","140px"),c.addClass("more"),c.html("more"))})}function E(){window.addEventListener("resize",w,!1);window.addEventListener("orientationchange",w,!1);window.addEventListener("hashchange",function(){var a=
window.location.hash,c="middle";if(""!=a)if("#cateapps:"==a.substr(0,10))c="cateapps",n=a.slice(10),p.html(localStorage.getItem("cate:"+n)),b(".loading_more label",j[c]).html("Loading..."),l[c]=!0,h[c]=1,k[c].html("");else if("#details:"==a.substr(0,9)){c="details";h[c]=0;var a=a.slice(9),d=sessionStorage.getItem("app:"+a);d?x(d):b.get(F+a,function(a){x(a)})}else a=a.slice(1),m[a]&&(c=a);G(c)});auto_loading&&window.addEventListener("scroll",function(){l[d]&&1<h[d]&&window.screen.availHeight+document.body.scrollTop>=
document.body.scrollHeight&&!q&&(q=!0,loadApps(d))})}function x(a){(a=JSON.parse(a))?(k.details.html(tmpl("details_tmpl",a)),D(),b("img.lazy").lazyload(),b("img.lazy").removeClass("lazy"),B(a.id)):window.location.hash=""}function w(){if(r!=window.orientation){r=window.orientation;var a=b("body");0!=r%180?a.addClass("horizontal"):a.removeClass("horizontal");0<b("#pop_wrapper").dom[0].clientWidth&&setTimeout(s,500)}}function G(a){m[a]&&d!=a&&(d&&(m[d].removeClass("active"),j[d].hide()),d=a,m[d].addClass("active"),
j[d].show(),1==h[d]&&loadApps(d));"left"!=d&&"middle"!=d&&"right"!=d?window.scrollTo(0,40):window.scrollTo(0,1);0<b("#pop_wrapper").dom[0].clientWidth&&b("#pop_wrapper").hide()}function H(){var a=null;switch(d){case "left":a="./featured.html";break;case "middle":a="./trend.html";break;case "right":a="./categories.html";break;case "cateapps":a="./cateapps.html"}var b="?os="+platform+"&l="+lang+"&format=json";"cateapps"==d&&(b+="&id="+n);return a+b}function A(){var a=1,c=b(".slice").dom.length/2,g=
b(".image_scrollbox"),e=b(".image_scroll"),f=b(".image_scrollbar span");t&&clearInterval(t);t=setInterval(function(){if("middle"==d){var h=g.dom[0].clientWidth-20;e.css("-webkit-transition","-webkit-transform .3s linear");e.css("-webkit-transform","translate3d("+-h+"px, 0, 0)");setTimeout(function(){var d=b(".slice").dom[0],g=b(".slice").dom[1];e.append(d.outerHTML);e.append(g.outerHTML);e.dom[0].removeChild(d);e.dom[0].removeChild(g);e.css("-webkit-transition","none");e.css("-webkit-transform","translate3d(0, 0, 0)");
f.removeClass("active");f.dom[a++].setAttribute("class","active");a==c&&(a=0)},400)}},5E3)}function s(){var a=b(".pop_content"),c=b("#pop_wrapper img");a.css("top",document.body.scrollTop+document.body.clientHeight/2);a.css("margin-top","-"+c.height()/2+"px");a.css("margin-left","-"+c.width()/2+"px")}function I(){b("#pop_wrapper").bind("touchmove",function(a){a.preventDefault()});b("#pop_wrapper img").bind("load",s);b(".prev_button").bind("click",function(){u&&u()});b(".next_button").bind("click",
function(){v&&v()})}var d="",n="",p=null,h={},k={},j={},m={},l={},q=!1,r=0,t=null,y=["left","middle","right","cateapps","details"],C="./relevant.html?os=android&l=en_US&id=",F="./details.html?os=android&l=en_US&format=json&id=",u=null,v=null;loadApps=function(a){z(a,auto_loading);var c=null,d=null,e=h[a];1==e&&(d=a,"cateapps"==a&&(d="cateapps:"+n),c=localStorage.getItem(d));var f=H()+"&page="+e;b.get(f,function(b){1==e?b&&b!=c&&(c=null,localStorage.setItem(d,b),k[a].html(""),h[a]=1,o(b,a)):o(b,a);
q=!1});c&&o(c,a)};vote=function(a,c,d){var e=b("span",a),f=parseInt(e.html());isNaN(f)||e.html(f+1);e.addClass("like");b.get("./lovecount?os=android&l=en_US&id="+d);track(a,"like",c,d)};track=function(a,c,g,e){var f=null,e=e?g+":"+e:g,f=d+"_"+c;"cateapps"==d?f=p.html()+"_"+c:"details"==d&&(f=g+"_"+c);_gaq.push(["_trackEvent",d,f,e]);a="http://track.dolphin-browser.com/track/site.gif?t=0&v="+version+"&l="+lang+"&p="+product+"_"+platform+"&w="+a.offsetLeft+"&h="+a.offsetTop+"&col="+d+"&item="+f+"&src="+
encodeURIComponent(e);b.get(a)};addslashes=function(a){return(a+"").replace(/([\\"'])/g,"\\$1").replace(/\0/g,"\\0")};shortNum=function(a){return 1E4<=a?">"+Math.floor(a/1E3)+"k":a};showpop=function(a,c){var d=b("#pop_wrapper");d.css("height",b("body").height()+"px");d.show();var d=b("#pop_wrapper img"),e=b(".screenshots img").dom[a];d.attr("src",e.attributes.src.value);s();d.attr("src",e.attributes["data-url"].value);0<a?(b(".prev_button").show(),u=function(){showpop(a-1,c)}):b(".prev_button").hide();
a<c-1?(b(".next_button").show(),v=function(){showpop(a+1,c)}):b(".next_button").hide()};b(document).ready(function(){for(i in y){var a=y[i];h[a]=1;k[a]=b("#"+a+"_content");j[a]=b("#"+a+"_wrap");m[a]=b("#"+a+"_tab")}l={left:!1,middle:!0,right:!1,cateapps:!0,details:!1};b("#page_load");p=b("#cateapps_title");window.scrollTo(0,1);E();I();a=document.createEvent("Events");a.initEvent("hashchange",!0,!1);window.dispatchEvent(a)})})(Zepto);
