<!Doctype HTML>
<html>
<head>
	<title>Game Center-featured</title>
	<meta name="format-detection" content="telephone=no">
	<meta http-equiv="Cache-Control" content="no-transform"> 
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
	<style>	
		body{background-color: #3d434b;margin: 0;padding: 0;text-align: center}
		a{text-decoration: none}
		.wenliBg{background-image: url(images/wenli_bg.png);z-index: -1}
		.topBar{position:fixed;top:0px;left:0px;width:100%;height: 50px;border-bottom: 1px solid #383d3f;-webkit-box-shadow:0 0 24px #000;background:-webkit-gradient(linear,left top,left bottom,from(#737d80),to(#51565d));z-index:10}
		.mainContent{margin-top:50px;}
		#center{margin:0 auto}
		.centerLeft{width:60px;height:20px;margin:16px 15px 0 33px}
		.centerRight{width:72px;height:21px;margin:16px 0 0}
		.rightIco{float:right;margin:16px 14px 0 0;width: 30px;height:22px}
		.headP{position:relative;width:320px;height: 230px;overflow: hidden;margin:0 auto 5px}
		 #picHolder{position:absolute;left:0px;top:0px;-webkit-transition:left linear 1.5s;text-align:left}
		.item{width:320px;height: 130px;margin:0 auto 6px;overflow: hidden;-webkit-box-shadow:0 0 4px #000}
		.item .first{ float: left;} 
		.item .second{ float: right;}
		.item .small{width:33%;height:100% }
		.item .middle{width:66%;height:100%}
		.item .large{height:100%}
		.imgHolder{position: relative;border-bottom:2px solid #0f1113}
		#picHolder >div{position:absolute;display:inline-block;}
		.itemShadow{width: 100%;height: 43px;border: 1px solid #383d3f;background-color: #272a2e;opacity: 0.6;position:absolute;bottom:1px}
		.imgHolder img{width: 100%;height: 100%}
		.itemShadow span{width: 8px;height: 8px;background-color: #fff;display: inline-block;margin:18px 4px 0}
		.itemShadow .on{background-color: yellow}
		.imgHolder .title{position:absolute;bottom: 5px;right:4px;margin:15px 5px 0 0;font:18px Arial,Verdana,Sans-serif;color:#fff;z-index:5}
	</style>
	<script>
		var d = document,dd=document.documentElement;
		var W=dd.clientWidth||d.body.clientWidth;
		var H=window.innerHeight||dd.clientHeight||d.body.clientHeight;
		if(W>H){W +=H;H = W-H;W = W-H;} /*确保样式是竖屏*/
		var style = document.createElement('style');
		style.innerHTML = '.headP{width:'+W+'px;height:'+(0.49*W)+'px} .item{width:'+W+'px;height:'+(W/3)+'px} #picHolder{width:'+W*3+'px} #picHolder img{width:'+W+'px;height:'+(0.49*W)+'px}';
		document.head.appendChild(style);
	</script>
</head>
<body class="wenliBg">
	<div class="topBar">
		<a href="index.html"><img src="images/myGame.png" class="rightIco"/></a>
		<div id="center"><img src="images/game.png" class="centerLeft"/>
			<img src="images/center.png" class="centerRight"/>
		</div>
	</div>
	<div id="mainContent" class="mainContent" >
	</div>
</body>
<script src="js/gameCenter.js"></script>
<script>
	(function(){
		var GCFeatured = new GameCenter(),pageItems=8,itemLists=[],itemHolder=null,banBen=null,getData,getUrl='http://172.16.9.151/pages/games/feature.json?os=android&l=en_US';
		itemHolder = document.getElementById('mainContent');
		GCFeatured.ajaxGet(getUrl,featuredGet);
		//getData = FeatureGet();
		//showGame('onepage',testData());
		//window.onload=sildePic;
		function changePic(parentNode,flagNode,dataArr){
			GCFeatured.addEvent(parentNode,'touchstart',function(){});
		}
		function featuredGet(reText){
			//alert(reText)
			var tmpRe;
			if(reText&&reText!=''){
					showGame('onepage',reText);
			}else
				throw(new Error('空的请求地址！'));
		}
		function testData(){
			var reObj = 
			{itemArr:[{id:0,ico:'images/gameImage/ico0.png',instro:'X-Type is a crazy space Shoot\'em\'Up with endless boss battles. Each time you defeat a boss, the next one will come back even bigger and meaner. You have to evade hundreds of bullets while taking out the enemy part by part.',authInfo:'Dominic Szablewski<br/>official sites:http://www.phoboslab.org/<br/>SNS:http://twitter.com/phoboslab<br/> Welcome to PhobosLab! My name is Dominic Szablewski,?@phoboslab?on twitter. I created?Impact?and?Asaph?and I write about?Javascript,?html5?andeverything else. Here\'s the?RSS-Feed?of all recent articles.',kind:'large',image:'images/gameImage/X-type_featured.jpg',dImage:['images/gameImage/X-type_Detailed1.jpg','images/gameImage/X-type_Detailed2.jpg','images/gameImage/X-type_Detailed3.jpg'],title:'X-Type',url:'http://www.phoboslab.org/xtype/'},
			{id:1,ico:'images/gameImage/ico1.png',instro:'Celesti is a bite-sized game about defending a city from impending armageddon. The game starts off gentle but quickly becomes a frantic race to deflect stars while repairing damage inflicted upon the city.',authInfo:'ryguydavis<br/>official sites:<br>email:example@example.com<br/>SNS:http://www.stumbleupon.com/stumbler/ryguydavis<br/> ',kind:'large',image:'images/gameImage/Celesti_featured.jpg',dImage:['images/gameImage/Celesti_Detailed1.jpg','images/gameImage/Celesti_Detailed2.jpg','images/gameImage/Celesti_Detailed1.jpg'],title:'Celesti',url:'https://dl.dropbox.com/u/22577765/celesti/index.html'},
			{id:2,ico:'images/gameImage/ico2.png',instro:'Destroy marbles by forming groups of 3 or more marbles of the same color.Tap the screen to shoot the marbles, tap the cannon to swap the color of the marble to be shot.',authInfo:'TweenSoft Inc.<br/>official sites:http://www.tweensoft.com/<br>email:info@tweensoft.com<br/> TweenSoft is a developer and publisher of mobile games and apps.We develop for IOS, Android, HTML5 and Facebook.All our HTML5 games can be played on Facebook from your computer, or from your mobile/tablet device, inside the Facebook app.',kind:'large',image:'images/gameImage/Magic-Marbles_featured.jpg',dImage:['images/gameImage/Magic-Marbles_Detailed1.jpg','images/gameImage/Magic-Marbles_Detailed2.jpg','images/gameImage/Magic-Marbles_Detailed3.jpg'],title:'Magic Marbles',url:'http://goosypets.com/html5games/marble/'},
			{id:3,ico:'images/gameImage/ico3.png',instro:'Wield powerful weapons to defend your castle from hordes of dragons and demons in this action-packed castle defense game. Upgrade powerful swords, axes and spears to earn the mighty Runeforge! How many monsters can you slay before your castle is overrun?',authInfo:'Lost Decade Games<br/>official sites:http://www.lostdecadegames.com/<br>email:hello@lostdecadegames.com<br/> Lost Decade Games is an award-winning independent game studio based in San Mateo, CA. We make HTML5 games. If this interests you, please get in touch.We currently have two full-time employees, co-founders Geoff Blair and Matt Hackett. The fantastic composer Joshua Morse provides our games with amazing music and sound effects.',kind:'small',image:'images/gameImage/Onslaught!Defensefeatured.jpg',dImage:['images/gameImage/Onslaught!Defense_Detailed1.jpg','images/gameImage/Onslaught!Defense_Detailed2.jpg','images/gameImage/Onslaught!Defense_Detailed3.jpg'],title:'Onslaught! Defense',url:'http://arcade.lostdecadegames.com/onslaught_defense/'},
			{id:4,ico:'images/gameImage/ico4.png',instro:'Snow Bound is a cool HTML5 snowboarding game. It works on mobile iOS and Android devices with touch screens.  Snowboard down the mountain while avoiding rocks and trees. But be careful-  your speed increases very quickly as you advance down the mountain.  This is a great example of a fast-paced HTML5 game that runs flawlessly on mobile devices.',authInfo:'TweenSoft Inc.<br/>official sites:http://www.tweensoft.com/<br>email:info@tweensoft.com<br/>TweenSoft is a developer and publisher of mobile games and apps.We develop for IOS, Android, HTML5 and Facebook.All our HTML5 games can be played on Facebook from your computer, or from your mobile/tablet device, inside the Facebook app.',kind:'middle',image:'images/gameImage/Coolpool_featured.jpg',dImage:['images/gameImage/Coolpool_Detailed1.jpg','images/gameImage/Coolpool_Detailed2.jpg','images/gameImage/Coolpool_Detailed3.jpg'],title:'Coolpool',url:'http://goosypets.com/html5games/coolpool/'},
			{id:5,ico:'images/gameImage/ico5.png',instro:'Cool Pool is a very fun and addictive pool game.Pop all the red balls into the pockets. Use your finger to control direction and speed of the white ball.',authInfo:'Bruno Garcia<br/>official sites:https://github.com/aduros<br>email:b@aduros.com<br/>SNS:http://twitter.com/b_garcia<br/> MMOsketeer at Three Rings. I also tinker with HTML5 and contribute to the Haxe JS compiler.',kind:'middle',image:'images/gameImage/SNOW-BOUND_featured.jpg',dImage:['images/gameImage/SNOW-BOUND_Detailed1.jpg','images/gameImage/SNOW-BOUND_Detailed2.jpg','images/gameImage/SNOW-BOUND_Detailed3.jpg'],title:'SNOW BOUND',url:'http://goosypets.com/html5games/coolpool/'},
			{id:6,ico:'images/gameImage/ico6.png',instro:'Tap to drop the jelly blox while they move left and right. The more accurate you drop the blox the higher score you\'ll get. If you miss 3 blox the game is over. Good Jelly Luck!',authInfo:'TweenSoft Inc.<br/>official sites:http://www.tweensoft.com/<br>email:info@tweensoft.com<br/>TweenSoft is a developer and publisher of mobile games and apps.We develop for IOS, Android, HTML5 and Facebook.All our HTML5 games can be played on Facebook from your computer, or from your mobile/tablet device, inside the Facebook app.',kind:'small',image:'images/gameImage/Tower-Jelly_featured.jpg',dImage:['images/gameImage/Tower-Jelly_Detailed1.jpg','images/gameImage/Tower-Jelly_Detailed2.jpg','images/gameImage/Tower-Jelly_Detailed3.jpg'],title:'Tower Jelly',url:'http://goosypets.com/html5games/tower/'},
			{id:7,ico:'images/gameImage/ico7.png',instro:'Defeat foul foes in this side-scrolling arcade action game! Fend off goblins, skeletons, ghosts and more. Eat meat to survive longer and get the high score!',authInfo:'Lost Decade Games<br/>official sites:http://www.lostdecadegames.com/<br>email:hello@lostdecadegames.com.<br/>Lost Decade Games?is an?award-winning?independent game studio based in San Mateo, CA. We make?HTML5 games. If this interests you, please?get in touch.We currently have two full-time employees, co-founders Geoff Blair and Matt Hackett. The fantastic composer Joshua Morse provides our games with amazing music and sound effects.',kind:'middle',image:'images/gameImage/Lava-Sword_featured.jpg',dImage:['images/gameImage/Lava-Sword_Detailed1.jpg','images/gameImage/Lava-Sword_Detailed2.jpg','images/gameImage/Lava-Sword_Detailed3.jpg'],title:'Lava Sword',url:'http://arcade.lostdecadegames.com/lava_sword/'},
			{id:8,ico:'images/gameImage/ico8.png',instro:'Aliens Invasion is an incomparable fun and addictive shooting game.',authInfo:'Cykod<br/>official sites:http://cykod.github.com/<br/>email:info@cykod.com<br/>Welcome to Cykod.We are a fully-integrated, self-funded web-development startup located in Boston, MA.We are focused on developing innovative web properties using the latest technology to help bring people to the interactive web. Currently we are developing a Ruby on Rails based CMS called Webiva which aims to be a comprehensive solution for Marketing and Web Development firms to create professional websites for their clients.',kind:'middle',image:'images/gameImage/Alien-Invasion_featured.jpg',dImage:['images/gameImage/Alien-Invasion_Detailed1.jpg','images/gameImage/Alien-Invasion_Detailed2.jpg','images/gameImage/Alien-Invasion_Detailed3.jpg'],title:'Alien Invasion',url:'http://cykod.github.com/AlienInvasion/'},
			{id:9,ico:'images/gameImage/ico9.png',instro:'Hi-Lo is a simple game that is highly polished and visually appealing, where players must guess whether the next card is of a higher or lower value than the current one.',authInfo:'Matthew Bowden<br/>official sites:http://www.truevalhalla.com/<br>email:true_valhalla@hotmail.com<br/>SNS:https://twitter.com/truevalhalla<br/>Indie game developer. Enjoys programming, interactive design, and coffee. Currently making?#HTML5?mobile games',kind:'small',image:'images/gameImage/Hi-Lo_featured.jpg',dImage:['images/gameImage/Hi-Lo_Detailed1.jpg','images/gameImage/Hi-Lo_Detailed2.jpg','images/gameImage/Hi-Lo_Detailed3.jpg'],title:'Hi-Lo',url:'http://truevalhalla.com/mobile/hilo/'},
			{id:10,ico:'images/gameImage/ico10.png',instro:'Lunch Bug is a free strategy puzzle game!',authInfo:'Lost Decade Games<br/>official sites:http://www.lostdecadegames.com/<br>email:hello@lostdecadegames.com.<br/>Lost Decade Games?is an?award-winning?independent game studio based in San Mateo, CA. We make?HTML5 games. If this interests you, please?get in touch.We currently have two full-time employees, co-founders Geoff Blair and Matt Hackett. The fantastic composer Joshua Morse provides our games with amazing music and sound effects.',kind:'small',image:'images/gameImage/Lunch-Bug_featured.jpg',dImage:['images/gameImage/Lunch-Bug_Detailed1.jpg','images/gameImage/Lunch-Bug_Detailed2.jpg','images/gameImage/Lunch-Bug_Detailed3.jpg'],title:'Lunch Bug',url:'http://lunchbug.lostdecadegames.com/'}
			],maxlength:11};
			reObj = JSON.stringify(reObj);
			return reObj
		}
		function showGame(method,data){
			var tmpHtml;
			if(itemHolder==null)
				return false;
			itemLists = GCFeatured.receData(data);	
			switch(method){
				case 'onepage':
					//tmpHtml = this.orgamizeHtml()  //根据服务器返回设置  
					itemHolder.innerHTML = GCFeatured.orgamizeHtml(itemLists,0,itemLists.length,function(){return '非常抱歉服务器没有返回数据，请稍候重试！'});  //本地测试
				break;
				case 'paging':
					itemHolder.innerHTML = GCFeatured.orgamizeHtml(itemLists,0,5,function(){return '非常抱歉服务器没有返回数据，请稍候重试！'});  //本地测试
				break;
			}
		}
		function sildePic(){  //定时切换图片
			var tmpPNode=document.getElementById('headItem'),spanArr=tmpPNode.getElementsByTagName('span'),tmpPNode= document.getElementById('picHolder'),tmpCArr = tmpPNode.getElementsByTagName('img'),tmpNode,startX=0,currentNode=0,tmpLength,currentPos=0,moveNode=null,hTitle=document.getElementById('headTitle');
			setInterval(function(){moveLeft()},5000);
			tmpLength = parseInt(tmpPNode.getAttribute('len'))-1;
			tmpPNode.addEventListener('touchstart',function(e){if(e.target.id in tmpCArr){if(!moveNode){startX=e.touches[0].pageX;}};});
			tmpPNode.addEventListener('touchmove',function(e){if(startX){var tmp=e.touches[0].pageX-startX;if(tmp>0){moveRight();}if(tmp<0){if(currentNode<2) moveLeft();}};startX=0;});
			d.addEventListener('touchend',function(e){startX=0});
			for(var i =0,length=tmpCArr.length;i<length;i++){
				tmpNode = tmpCArr[i];
				tmpNode.id = i;
				tmpCArr[i]={node:tmpNode,width:tmpNode.style.width,id:i};
			}
			function moveTo(targetNode,targetPos){
				if(0<targetNode&&targetNode<tmpLength){
					currentPos=targetPos;
					tmpPNode.style.left=currentPos+'px';
					spanArr[currentNode].className='';
					spanArr[currentNode].setAttribute('class','on');
					currentNode=targetNode;
					hTitle.innerHTML=hTitle.getAttribute('tit'+currentNode);
				}
			}
			function moveRight(){
				if(currentNode>0){
					currentPos+=tmpCArr[currentNode].width;
					picHolder.style.left=currentPos+'px';
					spanArr[currentNode].className='';
					spanArr[currentNode-1].setAttribute('class','on');
					currentNode--;
					hTitle.innerHTML=hTitle.getAttribute('tit'+currentNode);
				}
			}
			function moveLeft(){
				if(currentNode<tmpLength){
					currentPos-=tmpCArr[currentNode].width;
					tmpPNode.style.left=currentPos+'px';
					spanArr[currentNode].className='';
					spanArr[currentNode+1].setAttribute('class','on');
					currentNode++;
					hTitle.innerHTML=hTitle.getAttribute('tit'+currentNode);
				}else{
					tmpPNode.style.left=0+'px';
					spanArr[currentNode].className='';
					spanArr[0].setAttribute('class','on');
					currentPos=0;
					currentNode =0;
					hTitle.innerHTML=hTitle.getAttribute('tit0');
				}
			}
		}
	})();
</script>
</html>